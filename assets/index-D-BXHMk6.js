import{r as h,s as dt,u as ut,e as ft,j as i,a as w,b as pt,d as j,f as A,h as gt,i as H,k as R,l as v,B as ht,m as P,n as mt,o as yt,p as X,q as F,t as Ct,T as k,v as xt,w as bt,x as wt,y as vt,z as _,A as St}from"./index-CfqMM1e6.js";import{C as I,a as kt,A as $t}from"./Artists-ClvGlJW1.js";function jt(t,e){var s,n,r;return h.isValidElement(t)&&e.indexOf(t.type.muiName??((r=(n=(s=t.type)==null?void 0:s._payload)==null?void 0:n.value)==null?void 0:r.muiName))!==-1}const At=(t,e)=>t.filter(s=>e.includes(s)),b=(t,e,s)=>{const n=t.keys[0];Array.isArray(e)?e.forEach((r,o)=>{s((a,l)=>{o<=t.keys.length-1&&(o===0?Object.assign(a,l):a[t.up(t.keys[o])]=l)},r)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:At(t.keys,Object.keys(e))).forEach(o=>{if(t.keys.includes(o)){const a=e[o];a!==void 0&&s((l,d)=>{n===o?Object.assign(l,d):l[t.up(o)]=d},a)}}):(typeof e=="number"||typeof e=="string")&&s((r,o)=>{Object.assign(r,o)},e)};function $(t){return`--Grid-${t}Spacing`}function G(t){return`--Grid-parent-${t}Spacing`}const L="--Grid-columns",x="--Grid-parent-columns",Rt=({theme:t,ownerState:e})=>{const s={};return b(t.breakpoints,e.size,(n,r)=>{let o={};r==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${x}) - (var(${x}) - ${r}) * (var(${G("column")}) / var(${x})))`}),n(s,o)}),s},Gt=({theme:t,ownerState:e})=>{const s={};return b(t.breakpoints,e.offset,(n,r)=>{let o={};r==="auto"&&(o={marginLeft:"auto"}),typeof r=="number"&&(o={marginLeft:r===0?"0px":`calc(100% * ${r} / var(${x}) + var(${G("column")}) * ${r} / var(${x}))`}),n(s,o)}),s},Mt=({theme:t,ownerState:e})=>{if(!e.container)return{};const s={[L]:12};return b(t.breakpoints,e.columns,(n,r)=>{const o=r??12;n(s,{[L]:o,"> *":{[x]:o}})}),s},Nt=({theme:t,ownerState:e})=>{if(!e.container)return{};const s={};return b(t.breakpoints,e.rowSpacing,(n,r)=>{var a;const o=typeof r=="string"?r:(a=t.spacing)==null?void 0:a.call(t,r);n(s,{[$("row")]:o,"> *":{[G("row")]:o}})}),s},Et=({theme:t,ownerState:e})=>{if(!e.container)return{};const s={};return b(t.breakpoints,e.columnSpacing,(n,r)=>{var a;const o=typeof r=="string"?r:(a=t.spacing)==null?void 0:a.call(t,r);n(s,{[$("column")]:o,"> *":{[G("column")]:o}})}),s},Tt=({theme:t,ownerState:e})=>{if(!e.container)return{};const s={};return b(t.breakpoints,e.direction,(n,r)=>{n(s,{flexDirection:r})}),s},Bt=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${$("row")}) var(${$("column")})`}}),Ot=t=>{const e=[];return Object.entries(t).forEach(([s,n])=>{n!==!1&&n!==void 0&&e.push(`grid-${s}-${String(n)}`)}),e},zt=(t,e="xs")=>{function s(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(s(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const n=[];return Object.entries(t).forEach(([r,o])=>{s(o)&&n.push(`spacing-${r}-${String(o)}`)}),n}return[]},Ht=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,s])=>`direction-${e}-${s}`):[`direction-xs-${String(t)}`];function Pt(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(s=>{t[s]!==void 0&&delete t[s]})}const Ut=gt(),Wt=dt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>e.root});function Vt(t){return pt({props:t,name:"MuiGrid",defaultTheme:Ut})}function Dt(t={}){const{createStyledComponent:e=Wt,useThemeProps:s=Vt,useTheme:n=ut,componentName:r="MuiGrid"}=t,o=(c,u)=>{const{container:m,direction:f,spacing:g,wrap:p,size:M}=c,N={root:["root",m&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...Ht(f),...Ot(M),...m?zt(g,u.breakpoints.keys[0]):[]]};return j(N,E=>A(r,E),{})};function a(c,u,m=()=>!0){const f={};return c===null||(Array.isArray(c)?c.forEach((g,p)=>{g!==null&&m(g)&&u.keys[p]&&(f[u.keys[p]]=g)}):typeof c=="object"?Object.keys(c).forEach(g=>{const p=c[g];p!=null&&m(p)&&(f[g]=p)}):f[u.keys[0]]=c),f}const l=e(Mt,Et,Nt,Rt,Tt,Bt,Gt),d=h.forwardRef(function(u,m){const f=n(),g=s(u),p=ft(g);Pt(p,f.breakpoints);const{className:M,children:N,columns:E=12,container:W=!1,component:q="div",direction:J="row",wrap:Q="wrap",size:Y={},offset:Z={},spacing:T=0,rowSpacing:tt=T,columnSpacing:et=T,unstable_level:C=0,...st}=p,nt=a(Y,f.breakpoints,y=>y!==!1),rt=a(Z,f.breakpoints),ot=u.columns??(C?void 0:E),it=u.spacing??(C?void 0:T),at=u.rowSpacing??u.spacing??(C?void 0:tt),ct=u.columnSpacing??u.spacing??(C?void 0:et),V={...p,level:C,columns:ot,container:W,direction:J,wrap:Q,spacing:it,rowSpacing:at,columnSpacing:ct,size:nt,offset:rt},lt=o(V,f);return i.jsx(l,{ref:m,as:q,ownerState:V,className:w(lt.root,M),...st,children:h.Children.map(N,y=>{var D;return h.isValidElement(y)&&jt(y,["Grid"])&&W&&y.props.container?h.cloneElement(y,{unstable_level:((D=y.props)==null?void 0:D.unstable_level)??C+1}):y})})});return d.muiName="Grid",d}function _t(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Lt(t){return parseFloat(t)}function Xt(t){return A("MuiCardActionArea",t)}const B=H("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Ft=t=>{const{classes:e}=t;return j({root:["root"],focusHighlight:["focusHighlight"]},Xt,e)},It=v(ht,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(P(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${B.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${B.focusVisible} .${B.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}}))),Kt=v("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(P(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}))),qt=h.forwardRef(function(e,s){const n=R({props:e,name:"MuiCardActionArea"}),{children:r,className:o,focusVisibleClassName:a,...l}=n,d=n,c=Ft(d);return i.jsxs(It,{className:w(c.root,o),focusVisibleClassName:w(a,c.focusVisible),ref:s,ownerState:d,...l,children:[r,i.jsx(Kt,{className:c.focusHighlight,ownerState:d})]})});function Jt(t){return A("MuiCardContent",t)}H("MuiCardContent",["root"]);const Qt=t=>{const{classes:e}=t;return j({root:["root"]},Jt,e)},Yt=v("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),K=h.forwardRef(function(e,s){const n=R({props:e,name:"MuiCardContent"}),{className:r,component:o="div",...a}=n,l={...n,component:o},d=Qt(l);return i.jsx(Yt,{as:o,className:w(d.root,r),ownerState:l,ref:s,...a})}),U=Dt({createStyledComponent:v("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,s.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>R({props:t,name:"MuiGrid"}),useTheme:mt});function Zt(t){return A("MuiSkeleton",t)}H("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const te=t=>{const{classes:e,variant:s,animation:n,hasChildren:r,width:o,height:a}=t;return j({root:["root",s,n,r&&"withChildren",r&&!o&&"fitContent",r&&!a&&"heightAuto"]},Zt,e)},O=F`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,z=F`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,ee=typeof O!="string"?X`
        animation: ${O} 2s ease-in-out 0.5s infinite;
      `:null,se=typeof z!="string"?X`
        &::after {
          animation: ${z} 2s linear 0.5s infinite;
        }
      `:null,ne=v("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],s.animation!==!1&&e[s.animation],s.hasChildren&&e.withChildren,s.hasChildren&&!s.width&&e.fitContent,s.hasChildren&&!s.height&&e.heightAuto]}})(P(({theme:t})=>{const e=_t(t.shape.borderRadius)||"px",s=Lt(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:yt(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${s}${e}/${Math.round(s/.6*10)/10}${e}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:({ownerState:n})=>n.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:n})=>n.hasChildren&&!n.width,style:{maxWidth:"fit-content"}},{props:({ownerState:n})=>n.hasChildren&&!n.height,style:{height:"auto"}},{props:{animation:"pulse"},style:ee||{animation:`${O} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(t.vars||t).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:se||{"&::after":{animation:`${z} 2s linear 0.5s infinite`}}}]}})),S=h.forwardRef(function(e,s){const n=R({props:e,name:"MuiSkeleton"}),{animation:r="pulse",className:o,component:a="span",height:l,style:d,variant:c="text",width:u,...m}=n,f={...n,animation:r,component:a,variant:c,hasChildren:!!m.children},g=te(f);return i.jsx(ne,{as:a,ref:s,className:w(g.root,o),ownerState:f,...m,style:{width:u,height:l,...d}})}),re=({releases:t})=>{const e=Ct();return t.map(s=>{var n;return i.jsx(U,{size:{xs:12,sm:4,md:3,lg:2},children:i.jsx(I,{sx:{bgcolor:"background.paper",color:"text.primary"},"data-testid":"release-card",children:i.jsxs(qt,{onClick:()=>e(`/release/${s.id}`),children:[i.jsx(kt,{component:"img",image:(n=s.images[0])==null?void 0:n.url,alt:s.name}),i.jsxs(K,{children:[i.jsx(k,{variant:"body1",noWrap:!0,"data-testid":"release-name",children:s.name}),i.jsx($t,{artists:s.artists})]})]})})},s.id)})},oe=({cards:t=3})=>i.jsx("div",{"data-testid":"skeleton-loader",children:Array.from(new Array(t)).map((e,s)=>i.jsx(U,{size:{xs:12,sm:4,md:3,lg:2},children:i.jsxs(I,{sx:{bgcolor:"background.paper",color:"text.primary"},children:[i.jsx(S,{variant:"rectangular",sx:{width:"100%",height:"100%",aspectRatio:"1 / 1"}}),i.jsxs(K,{children:[i.jsx(S,{width:"80%",height:24}),i.jsx(S,{width:"60%",height:20}),i.jsx(S,{width:"60%",height:20})]})]})},`skeleton-${s}`))}),ce=()=>{const t=xt(),{t:e}=bt("home"),{releases:s,loading:n,error:r,offset:o,hasMore:a,hasError:l}=wt(c=>c.music),d=h.useRef(null);return h.useEffect(()=>{t(vt()),t(_(0))},[t]),h.useEffect(()=>{if(!a||n||l)return;const c=new IntersectionObserver(u=>{u[0].isIntersecting&&t(_(o))},{threshold:1});return d.current&&c.observe(d.current),()=>c.disconnect()},[t,o,a,n,l]),i.jsxs(St,{p:3,sx:{bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[i.jsx(k,{variant:"h6",gutterBottom:!0,align:"left",children:e("title")}),!n&&!r&&s.length===0&&i.jsx(k,{variant:"h5",gutterBottom:!0,align:"center",children:e("noRecords")}),r&&i.jsx(k,{color:"error",align:"center",mt:4,children:r}),i.jsxs(U,{container:!0,spacing:3,children:[i.jsx(re,{releases:s}),n&&i.jsx(oe,{cards:10}),a&&i.jsx("div",{ref:d,"data-testid":"observer",style:{height:1}})]})]})};export{ce as default};
